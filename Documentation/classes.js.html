<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Represents a single cell in the grid.
 * @class
 */
class Tile {
	/**
	 * Represents a single cell in the grid.
	 * @constructor
	 */
	constructor(){
		this.mine = false;
		this.flag = false;
		this.adjminenum = 0;
	}
}
/**
 * Represents the logic for the mineField.
 * @class
 */
class mineField {
	/**
	 * @constructor
	 * @param {int} height - The height of the grid.
	 * @param {int} width - The width of the grid.
	 * @param {int} numBombs - The amount of bombs to be placed in the grid.
	 */
    constructor(height, width, numBombs){
        this.height = height;
        this.width = width;
		this.bombs = numBombs;
		this.flags = numBombs;
        this.arr = [];
		this.endgame = false;
		let cells = height * width;
		let cellsLeft = height * width;

        for(let i = 0; i &lt; height; i++){
            this.arr.push([0]);
            for(let j = 0; j &lt; width; j++){
                this.arr[i][j] = new Tile();
				this.arr[i][j].mine = this.placeBombs(numBombs,cellsLeft);
				cellsLeft--;
				if(this.arr[i][j].mine == true){
					numBombs--;
				}
            }
        }//populates the array with mines
		this.numberField();
    }
	/**
	 * @function
	 * loops through the grid and adds the numbers to the board in the applicable cells.
	 * @returns - nothing
	 */
	numberField()
	{
		for(let i=0; i&lt;this.height; i++)
		{
			for(let j=0; j&lt;this.width; j++)
			{
				if(this.arr[i][j].mine){
					if(i > 0){
						this.arr[i-1][j].adjminenum++;
						if(j > 0){
							this.arr[i-1][j-1].adjminenum++;
						}
						if(j &lt; this.width-1){
							this.arr[i-1][j+1].adjminenum++;
						}
					}
					if(j > 0){
						this.arr[i][j-1].adjminenum++;
					}
					if(j &lt; this.width-1){
						this.arr[i][j+1].adjminenum++;
					}
					if(i &lt; this.height-1){
						this.arr[i+1][j].adjminenum++;
						if(j > 0){
							this.arr[i+1][j-1].adjminenum++;
						}
						if(j &lt; this.width-1){
							this.arr[i+1][j+1].adjminenum++;
						}
					}
				}
			}
		}
	}
	/**
	 * calls the expansion and checks for bombs in the cell clicked on
	 * @function
	 * @param {int} cell - The specific cell to alter.
	 * @param {int} row - The row of the grid the cell is in.
	 * @param {int} col - The column of the grid the cell is in.
	 * @returns - nothing
	 */
	Click(cell,row,col){
		if(!(this.endgame)){
			if(this.arr[row][col].mine == true){
				cell[row][col].className = 'bomb';
				this.ShowBombs(cell);
				this.endgame = true;
				window.alert("You Lose\nClick reset to try again");
			}
			//checks for all of the possible types of cells the clicked one could be
			else if(this.arr[row][col].adjminenum == 0){
				this.Expand(cell,row,col);
			}
			else if(this.arr[row][col].adjminenum == 1){
				cell[row][col].className = 'clicked1';
			}
			else if(this.arr[row][col].adjminenum == 2){
				cell[row][col].className = 'clicked2';
			}
			else if(this.arr[row][col].adjminenum == 3){
				cell[row][col].className = 'clicked3';
			}
			else if(this.arr[row][col].adjminenum == 4){
				cell[row][col].className = 'clicked4';
			}
			else if(this.arr[row][col].adjminenum == 5){
				cell[row][col].className = 'clicked5';
			}
			else if(this.arr[row][col].adjminenum == 6){
				cell[row][col].className = 'clicked6';
			}
			else if(this.arr[row][col].adjminenum == 7){
				cell[row][col].className = 'clicked7';
			}
			else if(this.arr[row][col].adjminenum == 8){
				cell[row][col].className = 'clicked8';
			}
		}
	}
	/**
	 * if the clicked on cell is a bomb and the endgame has occurred, this function turns all of the bombs visible
	 * @function
	 * @param {int} cell - The specific cell to alter.
	 * @returns - nothing
	 */
	ShowBombs(cell){
		for(let i = 0; i&lt;this.height; i++){
			for(let j = 0; j&lt;this.width; j++){
				if(this.arr[i][j].mine){
					cell[i][j].className = 'bomb';
				}
			}
		}
	}
	/**
	 * handles the functionality of flags. If a flag is placed it will decrement and in the case all are gone it calls checkFlags to check if they're all in the correct place for the win.
	 * @function
	 * @param {int} row - The row of the grid the cell is in.
	 * @param {int} col - The column of the grid the cell is in.
	 * @returns - nothing
	 */
	Flag(row,col) {
		this.arr[row][col].flag = true;
		flags --;
		if(flags == 0) {
			Checkflags();
		}
	}
	/**
	 * Checks if all flags are in the correct place for the win.
	 * @function
	 * @returns - false if there are unflagged mines, nothing if the game ends
	 */
	Checkflags(){
		for(let i = 0; i&lt;this.height; i++){
			for(let j = 0; j&lt;this.width; j++){
				if(this.arr[i][j].mine &amp;&amp; !(this.arr[i][j].flag)){
					return;
				}
			}
		}
		window.alert("You Win\nClick reset to play again");
		this.endgame = true;
	}
	/**
	 * runs the expansion and checks for bombs in the cell clicked on
	 * @function
	 * @param {int} cell - The specific cell to alter.
	 * @param {int} row - The row of the grid the cell is in.
	 * @param {int} col - The column of the grid the cell is in.
	 * @returns - if cell is already clicked or a bomb is found, otherwise nothing
	 */
	Expand(cell, row, col) {
		if(cell[row][col].className == 'clicked' || cell[row][col].className == 'clicked1'|| cell[row][col].className == 'clicked2' || cell[row][col].className == 'clicked3'|| cell[row][col].className == 'clicked4'|| cell[row][col].className == 'clicked5'
			|| cell[row][col].className == 'clicked6' || cell[row][col].className == 'clicked7' || cell[row][col].className =='clicked8'){
			return;
		}
		if(this.arr[row][col].adjminenum == 0 &amp;&amp; !(this.arr[row][col].mine)){
			cell[row][col].className = 'clicked';
			if(row > 0){
				this.Expand(cell,row-1,col);
				if(col > 0){
					this.Expand(cell,row-1,col-1);
				}
				if(col &lt; this.width-1){
					this.Expand(cell,row-1,col+1);
				}
			}
			if(col > 0){
				this.Expand(cell,row,col-1);
			}
			if(col &lt; this.width-1){
				this.Expand(cell,row,col+1);
			}
			if(row &lt; this.height-1){
				this.Expand(cell,row+1,col);
				if(col > 0){
					this.Expand(cell,row+1,col-1);
				}
				if(col &lt; this.width-1){
					this.Expand(cell,row+1,col+1);
				}
			}
		}//recursively calls for it to go out to all squares if there is no mine near it
		else if(!(this.arr[row][col].mine)) {
			this.Click(cell, row, col);
			return;
		}
	}
	/**
	 * runs the expansion and checks for bombs in the cell clicked on
	 * @function
	 * @param {int} bombsLeft - The amount of bombs yet to be placed.
	 * @param {int} cellsLeft - The amount of cells left to be checked
	 * @returns - returns true if bombs are left and the random number is less than the ratio of bombsleft to cells left. Otherwise, returns false.
	 */
	placeBombs(bombsLeft, cellsLeft){
		if(bombsLeft > 0){
			return(Math.random() &lt;= (bombsLeft / cellsLeft));
		}
		return false;
	}
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="mineField.html">mineField</a></li><li><a href="Tile.html">Tile</a></li></ul><h3>Global</h3><ul><li><a href="global.html#loopsthroughthegridandaddsthenumberstotheboardintheapplicablecells.">loops through the grid and adds the numbers to the board in the applicable cells.</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Sep 14 2018 20:45:26 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
